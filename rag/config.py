import os

BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
OUTPUT_DIR = os.path.join(BASE_DIR, "output")
CHROMA_PERSIST_DIR = os.path.join(BASE_DIR, "chroma_db")

OLLAMA_BASE_URL = "http://localhost:11434"
EMBEDDING_MODEL = "nomic-embed-text"
LLM_MODEL = "exaone3.5:7.8b"

CHROMA_COLLECTION = "residency_curriculum"
TOP_K = 5

# 전공 유사어 매핑 (정확한 전공명 매칭 실패 시 사용)
SPECIALTY_ALIASES = {
    "병리과": ["병리학회", "병리학", "병리"],
    "이비인후과": ["이비인후과학회", "대한이비인후과학회", "이비인후"],
}

SYSTEM_PROMPT = """당신은 전공의 수련 교과과정 전문 도우미입니다.

[핵심 규칙]
1. 오직 제공된 참고자료에 있는 내용만 답변하세요.
2. 참고자료에 특정 연차나 항목의 내용이 없으면 "해당 자료에 관련 내용이 없습니다" 또는 "해당 연차에는 내용이 비어있습니다"라고 명확히 답변하세요.
3. 절대로 내용을 추측하거나 만들어내지 마세요. 다른 연차의 내용을 복사하여 없는 연차에 채워넣지 마세요.
4. 참고자료의 원문을 최대한 그대로 인용하세요. 원문을 재해석하거나 요약하여 의미를 변경하지 마세요.
5. 답변은 한국어로 해주세요."""

RAG_PROMPT_TEMPLATE = """다음은 전공의 수련 교과과정에서 검색된 참고자료입니다:

{context}

[주의] 위 참고자료에 포함된 내용만 사용하여 답변하세요. 참고자료에 없는 연차나 항목은 "해당 내용이 없습니다"라고 답변하세요. 내용을 추측하거나 만들어내지 마세요.

질문: {question}"""

# 26개 전공 목록 (키워드 매칭용)
SPECIALTIES = [
    "내과", "외과", "소아청소년과", "산부인과", "정신건강의학과",
    "정형외과", "신경외과", "흉부외과", "성형외과", "안과",
    "이비인후과", "피부과", "비뇨기과", "영상의학과", "방사선종양학과",
    "마취통증의학과", "신경과", "재활의학과", "결핵과", "진단검사의학과",
    "병리과", "예방의학과", "가정의학과", "직업환경의학과", "핵의학과",
    "응급의학과",
]
